#!/usr/bin/env php
<?php

use BladeUI\Icons\Generation\IconGenerator;
use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Output\OutputInterface;
use Symfony\Component\Console\SingleCommandApplication as Command;

$autoloadPath = getcwd() . "/vendor/autoload.php";
if (!file_exists($autoloadPath)) {
    echo 'Autoload not found.' . PHP_EOL;
    exit(1);
}
require_once $autoloadPath;

return (new Command)->setCode(function (InputInterface $input, OutputInterface $output) {
    $output->writeln("Starting to generate icons...");

    IconGenerator::create(
        require getcwd().'/config/generation.php'
    )->generate();

    $output->writeln("Finished generating icons!");

    return Command::SUCCESS;
})->run();
